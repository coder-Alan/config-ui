{"version":3,"sources":["webpack:///D:/ZHF-Project/config-ui/uni-app/vue2/uni_modules/config-ui/components/co-tree-item/co-tree-item.vue?07b5","webpack:///D:/ZHF-Project/config-ui/uni-app/vue2/uni_modules/config-ui/components/co-tree-item/co-tree-item.vue?ed73","webpack:///D:/ZHF-Project/config-ui/uni-app/vue2/uni_modules/config-ui/components/co-tree-item/co-tree-item.vue?37dc","webpack:///D:/ZHF-Project/config-ui/uni-app/vue2/uni_modules/config-ui/components/co-tree-item/co-tree-item.vue?c4f7","uni-app:///uni_modules/config-ui/components/co-tree-item/co-tree-item.vue","webpack:///D:/ZHF-Project/config-ui/uni-app/vue2/uni_modules/config-ui/components/co-tree-item/co-tree-item.vue?5fe2","webpack:///D:/ZHF-Project/config-ui/uni-app/vue2/uni_modules/config-ui/components/co-tree-item/co-tree-item.vue?1e12"],"names":["name","components","CoTreeItem","CoSvgIcon","CoCheckbox","props","singleCheckedId","type","default","multipleCheckedIdList","data","showCheckbox","onlyLeaf","multiple","lazy","load","disabled","parentNodes","required","parentChecked","level","idSeparator","hasDefaultValue","nodeData","isOpen","isChecked","loading","current","itemCheckedList","isIndeterminate","isShow","height","computed","idName","id","children","childIdList","path","fullData","isLeaf","canShowCheckbox","itemStyle","created","immediate","initwatch","query","select","boundingClientRect","exec","methods","handleDefaultChecked","clickLeafNode","onCheckboxChange","handleMultipleChecked","checkedInfo","checkedNodes","deletedKeys","onMultipleSelfCheck","arg","checked","onCheck","onStatusChange","tabOpen","then","isStartWith","setSingleCheckedIdWatch","singleWatch"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAqI;AACrI;AACgE;AACL;AACsC;;;AAGjG;AAC+K;AAC/K,gBAAgB,6KAAU;AAC1B,EAAE,kFAAM;AACR,EAAE,mGAAM;AACR,EAAE,4GAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,uGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC5BA;AAAA;AAAA;AAAA;AAAqqB,CAAgB,snBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC2DzrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA1BA,gBA4BA;EACAA;EACAC;IACAC;IACAC;IACAC;EACA;EACAC;IACAC;MACAC;MACAC;IACA;IACAC;MACAF;MACAC;QAAA;MAAA;IACA;IACAE;MACAH;MACAC;QAAA;MAAA;IACA;IACAH;MACAE;MACAC;QAAA;MAAA;IACA;IACA;IACAG;MACAJ;MACAC;IACA;IACA;IACAI;MACAL;MACAC;IACA;IACA;IACAK;MACAN;MACAC;IACA;IACA;IACAM;MACAP;MACAC;IACA;IACAO;MACAR;MACAC;QACA;MACA;IACA;IACA;IACAQ;MACAT;MACAC;QAAA;MAAA;IACA;IACAS;MACAV;MACAW;MACAV;QAAA;MAAA;IACA;IACAW;MACAZ;MACAC;IACA;IACAY;MACAb;MACAC;IACA;IACA;IACAa;MACAd;MACAC;IACA;IACAc;MACAf;MACAC;IACA;EACA;EACAE;IACA;MACAa;MACAC;MACAC;MACAC;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;IACA;EACA;EACAC;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MAAA;MACA;QAAA;MAAA;IACA;IACAC;MAAA;MACA,kDACA,oEAEA,kFACA;IAGA;IACAC;MACA,uCACA;QACAD;MAAA;IAEA;IACAE;MACA;QACA;MACA,OACA;QACA;MACA;IACA;IACA;IACAC;MACA,2BACA,gBACA,cACA,OACA;IACA;IACAC;MACA;IACA;EACA;EACAC;IAAA;IACA;MACA,YACA;QAAA;MAAA,GACA;QACA;;QAEA;QACA;;QAEA;QACA;UACA;UACA;UACA;UACA;UACA;QACA;QACA;QAAA,KACA;UACA;UACA;YACA;YACA;YACA;UACA;QACA;MACA,GACA;QACAC;MACA,EACA;IACA;IAEA,4BACA;MAAA;IAAA,GACA;MACA;QACA;QACAC;MACA;IACA,EACA;IAEA;IAEA;MACA;MACAC,MACAC,8BACAC;QACA;QACA;MACA,GACAC;IACA,OACA;MACA;IACA;EACA;EACAC;IACAC;MAAA;MACA;QACA;UACA;YACA;YACA;YACA;UACA,OACA;YACA;YACA;cACA;gBACAd;cACA;YACA;YAEA;cAAA;YAAA;YAEA;cACA;cACA;cACA;YACA,OACA;cACA;cACA;YACA;UACA;QACA,OACA;UACA;YACA;YACA;UACA;QACA;MACA;IACA;IACAe;MACA;MAEA;IACA;IACAC;MACA;MAEA;MAEA;QACA;MACA;;MAEA;MACA;QACA;UACA;QACA,OACA;UACA;QACA;QAEA;MACA;MAEA;IACA;IACAC;MACA;QACA;UACAC;YACAC;YACAC;UACA;QACA;QAEA;UACAF;QACA,OACA;UACAA;QACA;MACA;MAEA;IACA;IACAG;MAAA;QAAAC;MAAA;MACA;QAAAC;QAAAL;MACAA;MAEA;MACA;IACA;IACAM;MAAA;QAAAF;MAAA;MACA;MACA;QAAAC;QAAAL;MACAA;MAEA;IACA;IACAO;MAAA;QAAAH;MAAA;MACA;QAAAC;MACA;MAEA;QACA;MACA;MAEA;QACA;UACA;YAAA;UAAA;QACA,OACA;UACA;QACA;MACA;MAEA;QACA;QACA;MACA,OACA;QACA;MACA,OACA;QACA;QACA;UACA;UACA;YACA9B;YACA;UACA;QACA;QACA;MACA;MAEA;IACA;IACAiC;MAAA;MACA;MAEA;MAEA;QACA;QACA,mBACAC;UACA;UACA;YACA;cAAA;YAAA;UACA;UACA;QACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IACAC;MAAA;MACA,8BACA;QAAA;MAAA,GACA;QACA;UACA;UACAC;QACA;MACA,EACA;IACA;EACA;AACA;AAAA,4B;;;;;;;;;;;;;AC7cA;AAAA;AAAA;AAAA;AAAwxC,CAAgB,6nCAAG,EAAC,C;;;;;;;;;;;ACA5yC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"uni_modules/config-ui/components/co-tree-item/co-tree-item.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./co-tree-item.vue?vue&type=template&id=3e7b95eb&scoped=true&\"\nvar renderjs\nimport script from \"./co-tree-item.vue?vue&type=script&lang=js&\"\nexport * from \"./co-tree-item.vue?vue&type=script&lang=js&\"\nimport style0 from \"./co-tree-item.vue?vue&type=style&index=0&id=3e7b95eb&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3e7b95eb\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"uni_modules/config-ui/components/co-tree-item/co-tree-item.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./co-tree-item.vue?vue&type=template&id=3e7b95eb&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.canShowCheckbox ? _vm.disabled.includes(_vm.id) : null\n  var l0 = _vm.isShow\n    ? _vm.__map(_vm.children, function (item, __i0__) {\n        var $orig = _vm.__get_orig(item)\n        var g1 = _vm.itemCheckedList.includes(item[_vm.idName])\n        return {\n          $orig: $orig,\n          g1: g1,\n        }\n      })\n    : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        l0: l0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./co-tree-item.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./co-tree-item.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"co-tree-item\" :class=\"isOpen ? 'co-tree-item-opened' : ''\" :style=\"itemStyle\">\r\n\t\t<view class=\"co-tree-item__node\">\r\n\t\t\t<template v-if=\"isLeaf\">\r\n\t\t\t\t<view class=\"co-tree-item__node__leaf\" :class=\"{ 'co-tree-item__node__checked': isChecked }\" @click=\"clickLeafNode(fullData)\">{{ nodeData[props.label] }}</view>\r\n\t\t\t</template>\r\n\t\t\t<template v-else>\r\n\t\t\t\t<view class=\"co-tree-item__node__content\" @click.capture=\"tabOpen\">\r\n\t\t\t\t\t<view class=\"co-tree-item__node__content__icon\">\r\n\t\t\t\t\t\t<CoSvgIcon icon=\"arrowRight\"></CoSvgIcon>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view v-if=\"loading\" class=\"co-loading-circle\"></view>\r\n\t\t\t\t\t<view class=\"co-tree-item__node__content__label\" :class=\"{ 'co-tree-item__node__checked': isChecked }\">{{ nodeData[props.label] }}</view>\r\n\t\t\t\t</view>\r\n\t\t\t</template>\r\n\t\t\t<CoCheckbox\r\n\t\t\t\tv-if=\"canShowCheckbox\"\r\n\t\t\t\tclass=\"co-tree-item__node__checkbox\"\r\n\t\t\t\t:value=\"id\"\r\n\t\t\t\t:checked=\"isChecked\"\r\n\t\t\t\t:indeterminate=\"isIndeterminate\"\r\n\t\t\t\t:disabled=\"disabled.includes(id)\"\r\n\t\t\t\t@change=\"onCheckboxChange\"\r\n\t\t\t></CoCheckbox>\r\n\t\t</view>\r\n\t\t<template v-if=\"isShow\">\r\n\t\t\t<CoTreeItem\r\n\t\t\t\tv-for=\"item in children\"\r\n\t\t\t\t:key=\"item[idName]\"\r\n\t\t\t\tref=\"treeItem\"\r\n\t\t\t\t:single-checked-id=\"singleCheckedId\"\r\n\t\t\t\t:multiple-checked-id-list=\"multipleCheckedIdList\"\r\n\t\t\t\t:data=\"item\"\r\n\t\t\t\t:props=\"props\"\r\n\t\t\t\t:load=\"load\"\r\n\t\t\t\t:lazy=\"lazy\"\r\n\t\t\t\t:disabled=\"disabled\"\r\n\t\t\t\t:multiple=\"multiple\"\r\n\t\t\t\t:show-checkbox=\"showCheckbox\"\r\n\t\t\t\t:only-leaf=\"onlyLeaf\"\r\n\t\t\t\t:parent-nodes=\"path\"\r\n\t\t\t\t:parent-checked=\"itemCheckedList.includes(item[idName])\"\r\n\t\t\t\t:level=\"level + 1\"\r\n\t\t\t\t:id-separator=\"idSeparator\"\r\n        :has-default-value=\"hasDefaultValue\"\r\n\t\t\t\t@check=\"onCheck\"\r\n\t\t\t\t@multiple-self-check=\"onMultipleSelfCheck\"\r\n\t\t\t\t@statusChange=\"onStatusChange\"\r\n\t\t\t\t@click=\"clickLeafNode\"\r\n\t\t\t></CoTreeItem>\r\n\t\t</template>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nimport CoTreeItem from '../co-tree-item/co-tree-item'\r\nimport CoSvgIcon from '../co-svg-icon/co-svg-icon'\r\nimport CoCheckbox from '../co-checkbox/co-checkbox'\r\n\r\n/**\r\n * TreeItem 树形控件\r\n * @description 树形控件\r\n * @property {String} single-checked-id 单选时选中的id\r\n * @property {Array<string>} multiple-checked-id-list 多选时选中的id数组\r\n * @property {Array} data 树形控件的数据源\r\n * @property {Object} props 配置选项，具体配置见下表\r\n * @property {String} props.id 指定节点id为节点对象的某个属性值\r\n * @property {String} props.label 指定节点标签为节点对象的某个属性值\r\n * @property {String} props.children 指定子树为节点对象的某个属性值\r\n * @property {String} props.isLeaf 指定节点是否为叶子节点，仅在指定了 lazy 属性的情况下生效\r\n * @property {Boolean} show-checkbox 是否显示多选框，节点是否可被选择\r\n * @property {Boolean} only-leaf 是否仅在叶子节点才显示多选框，仅在 showCheckbox=true 时生效\r\n * @property {Boolean} multiple 是否多选\r\n * @property {Boolean} lazy 是否启用懒加载\r\n * @property {Function} load 懒加载的方法\r\n * @property {Array} disabled 复选框禁用数组，存储 id，仅 showCheckbox=true 时生效\r\n * @property {Array<object>} parent-nodes 父节点数组，用于拼接节点的路径\r\n * @property {Boolean} parent-checked 父节点是否被选中，用于判断子节点是否被选中\r\n * @property {Number} level 节点的层级，用于计算缩进\r\n * @property {String} id-separator id分隔符，默认为 - ，如果设置了 defaultValue 默认值，务必设置 idSeparator\r\n * @property {Boolean} has-default-value 是否有默认值，用于判断是否需要设置默认选中状态\r\n * @event {Function} check 点击的节点选中状态发生变化时触发，回调参数为当前节点数据、当前节点是否被选中、当前所有已选中的节点数据\r\n * @event {Function} check-change 相关的节点选中状态发生变化时触发，回调参数为当前节点数据、当前节点是否被选中、当前所有已选中的节点数据\r\n * @event {Function} click 点击叶子节点时触发，回调参数为当前节点数据\r\n * @example <co-tree :data=\"data\" :props=\"props\" :show-checkbox=\"true\" :multiple=\"true\" @check=\"onCheck\"></co-tree>\r\n */\r\n\r\nexport default {\r\n\tname: 'CoTreeItem',\r\n\tcomponents: {\r\n    CoTreeItem,\r\n    CoSvgIcon,\r\n    CoCheckbox,\r\n  },\r\n\tprops: {\r\n\t\tsingleCheckedId: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: ''\r\n\t\t},\r\n\t\tmultipleCheckedIdList: {\r\n\t\t\ttype: Array,\r\n\t\t\tdefault: () => []\r\n\t\t},\r\n\t\tdata: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault: () => ({})\r\n\t\t},\r\n\t\tprops: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault: () => ({})\r\n\t\t},\r\n\t\t// 节点是否可被选择\r\n\t\tshowCheckbox: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false\r\n\t\t},\r\n\t\t// 是否只有最后的节点才显示多选框\r\n\t\tonlyLeaf: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false\r\n\t\t},\r\n\t\t// 是否多选\r\n\t\tmultiple: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false\r\n\t\t},\r\n\t\t// 是否启用懒加载\r\n\t\tlazy: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false\r\n\t\t},\r\n\t\tload: {\r\n\t\t\ttype: Function,\r\n\t\t\tdefault: () => {\r\n\t\t\t\treturn function() {}\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 复选框禁用数组，存储id\r\n\t\tdisabled: {\r\n\t\t\ttype: Array,\r\n\t\t\tdefault: () => ([])\r\n\t\t},\r\n\t\tparentNodes: {\r\n\t\t\ttype: Array,\r\n\t\t\trequired: true,\r\n\t\t\tdefault: () => ([])\r\n\t\t},\r\n\t\tparentChecked: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false\r\n\t\t},\r\n\t\tlevel: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: 1\r\n\t\t},\r\n    // id分隔符，仅在设置默认选中值时生效\r\n    idSeparator: {\r\n      type: String,\r\n      default: '-'\r\n    },\r\n\t\thasDefaultValue: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false\r\n\t\t},\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tnodeData: this.data,\r\n\t\t\tisOpen: false,\r\n\t\t\tisChecked: false,\r\n\t\t\tloading: false,\r\n\t\t\tcurrent: '',\r\n\t\t\titemCheckedList: [], // 子节点选中的集合\r\n\t\t\tisIndeterminate: false, // 设置不确定状态，仅负责样式控制\r\n\t\t\tisShow: false,\r\n      height: 'unset',\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\tidName() {\r\n\t\t\treturn this.props.id\r\n\t\t},\r\n\t\tid() {\r\n\t\t\treturn this.nodeData[this.idName]\r\n\t\t},\r\n\t\tchildren() {\r\n\t\t\treturn this.nodeData[this.props.children] || []\r\n\t\t},\r\n\t\tchildIdList() {\r\n\t\t\treturn this.children.map(item => item[this.idName])\r\n\t\t},\r\n\t\tpath() {\r\n\t\t\treturn [\r\n\t\t\t\t...this.parentNodes, \r\n\t\t\t\t{\r\n\t\t\t\t\t[this.props.id]: this.nodeData[this.props.id],\r\n\t\t\t\t\t[this.props.label]: this.nodeData[this.props.label]\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t},\r\n\t\tfullData() {\r\n\t\t\treturn {\r\n\t\t\t\t...this.nodeData,\r\n\t\t\t\tpath: this.path\r\n\t\t\t}\r\n\t\t},\r\n\t\tisLeaf() {\r\n\t\t\tif (this.lazy) {\r\n        return this.nodeData[this.props.isLeaf]\r\n      }\r\n      else {\r\n        return !this.children.length\r\n      }\r\n\t\t},\r\n\t\t// 是否可以显示复选框\r\n\t\tcanShowCheckbox() {\r\n\t\t\treturn this.showCheckbox\r\n\t\t\t\t? this.onlyLeaf\r\n\t\t\t\t\t? this.isLeaf\r\n\t\t\t\t\t: true\r\n\t\t\t\t: false\r\n\t\t},\r\n    itemStyle() {\r\n      return `--close-height: ${this.height}px;`\r\n    },\r\n\t},\r\n\tcreated() {\r\n\t\tif (this.multiple) {\r\n\t\t\tthis.$watch(\r\n\t\t\t\t() => this.parentChecked,\r\n\t\t\t\t(val) => {\r\n\t\t\t\t\tif (val === this.isChecked) return\r\n\r\n\t\t\t\t\t// 将父组件的 checked 状态赋值给当前组件的 isChecked 属性\r\n\t\t\t\t\tthis.isChecked = val\r\n\r\n\t\t\t\t\t// 如果新的 checked 状态为 true\r\n\t\t\t\t\tif (val) {\r\n\t\t\t\t\t\t// 将 isIndeterminate 状态设置为 false，表示当前组件的选中状态是确定的\r\n\t\t\t\t\t\tthis.isIndeterminate = false\r\n\t\t\t\t\t\t// 选中所有子组件，将所有子组件的 id 收集到 itemCheckedList 数组中\r\n\t\t\t\t\t\tthis.itemCheckedList = this.childIdList\r\n\t\t\t\t\t\tthis.onMultipleSelfCheck(this.fullData, true)\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// 如果新的 checked 状态为 false\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\t// 并且如果 isIndeterminate 状态为 false，说明没有选中的子组件\r\n\t\t\t\t\t\tif (!this.isIndeterminate) {\r\n\t\t\t\t\t\t\t// 将 itemCheckedList 数组清空\r\n\t\t\t\t\t\t\tthis.itemCheckedList = []\r\n\t\t\t\t\t\t\tthis.onMultipleSelfCheck(this.fullData, false)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\timmediate: false\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t\t}\r\n\r\n\t\tconst initwatch = this.$watch(\r\n\t\t\t() => this.isOpen,\r\n\t\t\t(val) => {\r\n\t\t\t\tif (val) {\r\n\t\t\t\t\tthis.isShow = true\r\n\t\t\t\t\tinitwatch()\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t)\r\n\r\n\t\tthis.handleDefaultChecked()\r\n\r\n\t\tif (this.isLeaf) {\r\n      const query = uni.createSelectorQuery().in(this);\r\n      query\r\n        .select('.co-tree-item__node')\r\n        .boundingClientRect((data) => {\r\n          const height = Math.round(data.height)\r\n          this.height = height > 30 ? height + 10 : 40\r\n        })\r\n        .exec();\r\n    }\r\n    else {\r\n      this.height = 40\r\n    }\r\n\t},\r\n\tmethods: {\r\n\t\thandleDefaultChecked() {\r\n\t\t\tif (this.hasDefaultValue && !this.onlyLeaf) {\r\n\t\t\t\tif (this.multiple) {\r\n\t\t\t\t\tif (this.multipleCheckedIdList.includes(this.id) || this.parentChecked) {\r\n\t\t\t\t\t\tthis.isChecked = true\r\n\t\t\t\t\t\tthis.itemCheckedList = this.childIdList\r\n\t\t\t\t\t\tthis.onMultipleSelfCheck(this.fullData, true)\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (this.children.length) {\r\n\t\t\t\t\t\tconst childIdList = []\r\n\t\t\t\t\t\tfor (let i = 0; i < this.multipleCheckedIdList.length; i++) {\r\n\t\t\t\t\t\t\tif (this.isStartWith(this.multipleCheckedIdList[i], this.id + this.idSeparator)) {\r\n\t\t\t\t\t\t\t\tchildIdList.push(this.multipleCheckedIdList[i])\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tconst itemCheckedList = childIdList.filter(item => this.childIdList.includes(item))\r\n\r\n\t\t\t\t\t\tif (itemCheckedList.length === this.children.length) {\r\n\t\t\t\t\t\t\tthis.isChecked = true\r\n\t\t\t\t\t\t\tthis.itemCheckedList = this.childIdList\r\n\t\t\t\t\t\t\tthis.onMultipleSelfCheck(this.fullData, true)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (childIdList.length > 0) {\r\n\t\t\t\t\t\t\tthis.isIndeterminate = true\r\n\t\t\t\t\t\t\tthis.itemCheckedList = itemCheckedList\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tif (this.singleCheckedId === this.id) {\r\n\t\t\t\t\t\tthis.isChecked = true\r\n\t\t\t\t\t\tthis.setSingleCheckedIdWatch()\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tclickLeafNode(e) {\r\n\t\t\tif (this.showCheckbox) return\r\n\r\n\t\t\tthis.$emit('click', e)\r\n\t\t},\r\n\t\tonCheckboxChange(e) {\r\n\t\t\tthis.isChecked = !!e\r\n\r\n\t\t\tif (this.isChecked) this.isIndeterminate = false\r\n\r\n\t\t\tif (!this.multiple && this.isChecked) {\r\n\t\t\t\tthis.setSingleCheckedIdWatch()\r\n\t\t\t}\r\n\r\n\t\t\t// 是多选且所有节点显示复选框，才触发checkChange事件\r\n\t\t\tif (this.multiple && !this.onlyLeaf) {\r\n\t\t\t\tif (this.isChecked) {\r\n\t\t\t\t\tthis.itemCheckedList = this.childIdList\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tthis.itemCheckedList = []\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.$emit('statusChange', this.fullData, this.isChecked)\r\n\t\t\t}\r\n\r\n\t\t\tthis.onCheck(this.fullData, this.isChecked)\r\n\t\t},\r\n\t\thandleMultipleChecked(checkedInfo) {\r\n\t\t\tif (this.multiple) {\r\n\t\t\t\tif (!checkedInfo) {\r\n\t\t\t\t\tcheckedInfo = {\r\n\t\t\t\t\t\tcheckedNodes: [],\r\n\t\t\t\t\t\tdeletedKeys: []\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.isChecked) {\r\n\t\t\t\t\tcheckedInfo.checkedNodes.unshift(this.nodeData)\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tcheckedInfo.deletedKeys.unshift(this.id)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn checkedInfo\r\n\t\t},\r\n\t\tonMultipleSelfCheck(...arg) {\r\n\t\t\tlet [data, checked, checkedInfo] = arg\r\n\t\t\tcheckedInfo = this.handleMultipleChecked(checkedInfo)\r\n\r\n\t\t\tthis.$emit('multiple-self-check', data, checked, checkedInfo)\r\n\t\t\tthis.$emit('statusChange', this.fullData, this.isChecked)\r\n\t\t},\r\n\t\tonCheck(...arg) {\r\n\t\t\t// console.log('itemChange', this.id, this.isChecked)\r\n\t\t\tlet [data, checked, checkedInfo] = arg\r\n\t\t\tcheckedInfo = this.handleMultipleChecked(checkedInfo)\r\n\r\n\t\t\tthis.$emit('check', data, checked, checkedInfo)\r\n\t\t},\r\n\t\tonStatusChange(...arg) {\r\n\t\t\tconst [data, checked] = arg\r\n\t\t\tconst changeId = data[this.idName]\r\n\r\n\t\t\tif (!checked) {\r\n\t\t\t\tthis.isChecked = false\r\n\t\t\t}\r\n\r\n\t\t\tif (this.childIdList.includes(changeId)) {\r\n\t\t\t\tif (!checked) {\r\n\t\t\t\t\tthis.itemCheckedList = this.itemCheckedList.filter(item => item !== changeId)\r\n\t\t\t\t}\r\n\t\t\t\telse if (!this.itemCheckedList.includes(changeId)) {\r\n\t\t\t\t\tthis.itemCheckedList.push(changeId)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (this.itemCheckedList.length === this.children.length) {\r\n\t\t\t\tthis.isChecked = true\r\n\t\t\t\tthis.isIndeterminate = false\r\n\t\t\t}\r\n\t\t\telse if (this.itemCheckedList.length) {\r\n\t\t\t\tthis.isIndeterminate = true\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tlet isIndeterminate = false\r\n\t\t\t\tfor (let i = 0; i < this.$refs.treeItem.length; i++) {\r\n\t\t\t\t\tconst item = this.$refs.treeItem[i]\r\n\t\t\t\t\tif (item.isIndeterminate) {\r\n\t\t\t\t\t\tisIndeterminate = true\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.isIndeterminate = isIndeterminate\r\n\t\t\t}\r\n\r\n\t\t\tthis.$emit('statusChange', this.nodeData, this.isChecked)\r\n\t\t},\r\n\t\ttabOpen() {\r\n\t\t\tif (this.loading) return\r\n\r\n\t\t\tthis.isOpen = !this.isOpen\r\n\r\n\t\t\tif (this.lazy && !this.nodeData[this.props.isLeaf] && !this.children.length) {\r\n\t\t\t\tthis.loading = true\r\n\t\t\t\tthis.load(this.id)\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\tthis.$set(this.nodeData, this.props.children, res)\r\n\t\t\t\t\t\tif (this.isChecked) {\r\n\t\t\t\t\t\t\tthis.itemCheckedList = res.map(item => item[this.idName])\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.loading = false\r\n\t\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 定义一个名为 isStartWith 的方法，用于判断字符串是否以指定的前缀开头\r\n\t\tisStartWith(str, prefix) {\r\n\t\t\t// 创建一个正则表达式对象，用于匹配以 prefix 开头的字符串\r\n\t\t\t// `^` 表示字符串的开始位置，`${prefix}` 是传入的前缀\r\n\t\t\tconst regex = new RegExp(`^${prefix}`);\r\n\t\t\t// 使用正则表达式的 test 方法检测字符串 str 是否符合正则表达式\r\n\t\t\t// 如果符合，返回 true；否则返回 false\r\n\t\t\treturn regex.test(str);\r\n\t\t},\r\n\t\tsetSingleCheckedIdWatch() {\r\n\t\t\tconst singleWatch = this.$watch(\r\n\t\t\t\t() => this.singleCheckedId,\r\n\t\t\t\t(val) => {\r\n\t\t\t\t\tif (this.isChecked && val !== this.id) {\r\n\t\t\t\t\t\tthis.isChecked = false\r\n\t\t\t\t\t\tsingleWatch()\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t)\r\n\t\t},\r\n\t}\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@mixin center($align, $justify) {\r\n\tdisplay: flex;\r\n\talign-items: $align;\r\n\tjustify-content: $justify;\r\n}\r\n\r\n.co-tree-item {\r\n  height: var(--close-height);\r\n\tmargin-left: 20rpx;\r\n\toverflow: hidden;\r\n\r\n\t&__node {\r\n\t\t@include center(center, space-between);\r\n    height: var(--close-height);\r\n\t\tborder-bottom: 1px solid #eee;\r\n\t\tbox-sizing: border-box;\r\n\r\n\t\t&__leaf {\r\n\t\t\t@include center(center, unset);\r\n\t\t\tflex: 1;\r\n\t\t\theight: 100%;\r\n\t\t\tmargin-left: 42rpx;\r\n\t\t\toverflow: hidden;\r\n\t\t}\r\n\r\n\t\t&__content {\r\n\t\t\t@include center(center, unset);\r\n\t\t\tflex: 1;\r\n\t\t\theight: 100%;\r\n\t\t\toverflow: hidden;\r\n\r\n\t\t\t&__icon {\r\n\t\t\t\ttransition: all .3s;\r\n\t\t\t}\r\n\r\n\t\t\t&__label {\r\n\t\t\t\tpadding-left: 10rpx;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t&__checkbox {\r\n\t\t\tpadding-right: 20rpx;\r\n\t\t\t// transform: scale(0.8);\r\n\t\t}\r\n\r\n\t\t&__checked {\r\n\t\t\tcolor: #1689F5;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n.co-tree-item-opened {\r\n\theight: unset;\r\n\r\n\t> .co-tree-item__node {\r\n\t\t.co-tree-item__node__content__icon {\r\n\t\t\ttransform: rotate(90deg);\r\n\t\t}\r\n\t}\r\n}\r\n</style>\r\n","import mod from \"-!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./co-tree-item.vue?vue&type=style&index=0&id=3e7b95eb&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./co-tree-item.vue?vue&type=style&index=0&id=3e7b95eb&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1741221771895\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}